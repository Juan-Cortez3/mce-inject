
mce-inject allows to inject machine checks in a running kernel.

Has to run as root. /dev/mcelog has to exist.

mce-inject mce-file1 ...
mce-inject < mce-file

Multiple files are processed in sequence

Requires a kernel with machine check injection
support. The injection only happens on the software level and does
not simulate full machine check handling on the platform level.

The machine checks to be injected are described in a input language similar
to the format the kernel outputs on a panic message (with a few extension).

In general you should be able to pipe in a panic message to inject
that mce.

See the IA32 SDM Vol3a chapter 14 for the details on fields. They correspond
to the machine check MSRs of the standard IA32 Machine check architecture
described there.

The keywords are case-insensitive

The machine check always starts with 

MCE

or

CPU number|broadcast [bank-number]
	Machine check is injected on CPU xx or broadcasted to all CPUs

BANK bank-number
STATUS {number|fatal|corrected|uncorrected|pcc|uc|val|en|over} 
MCGSTATUS {number|mcip|ripv|eipv}
ADDR number
RIP number
MISC number

CPU number : machine check exception : number BANK number : number
	parsed for compatibility with kernel output. Use explicit statements

TSC number
	TSC state injected in machine check

NOBROADCAST
	Don't broadcast exceptions to all CPUs. Default is to broadcast
	UC


multiple fields can be on a line

number can be hex/octal/decimal in the usual C format.

Multiple machine checks can be in a single file, each new one 
starts with "CPU" or "MCE"

For all missing fields reasonable default values are filled in
(hopefully)

Comments start with # until the end of the line

